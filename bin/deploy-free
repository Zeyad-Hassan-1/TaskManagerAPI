#!/bin/bash
# Prepare for FREE Railway Deployment

echo "ğŸš‚ Preparing for Railway Deployment (100% FREE!)"
echo "================================================="

# Check if git repository
if [ ! -d .git ]; then
    echo "âŒ Not a git repository. Initializing..."
    git init
    git branch -M main
fi

echo "âœ… Railway configuration files created"
echo "âœ… Health endpoint added to routes"

# Check if committed
if [ -n "$(git status --porcelain)" ]; then
    echo ""
    echo "ğŸ“¤ Committing changes for deployment..."
    git add .
    git commit -m "Add Railway deployment configuration

- Added railway.toml for deployment settings
- Added /health endpoint for health checks  
- Production ready with email configuration
- All tests passing (320/320)"
    echo "âœ… Changes committed"
else
    echo "âœ… Repository is clean"
fi

echo ""
echo "ğŸ¯ Next Steps for FREE Deployment:"
echo ""
echo "1. Push to GitHub:"
echo "   git remote add origin https://github.com/Zeyad-Hassan-1/TaskManagerAPI.git"
echo "   git push -u origin main"
echo ""
echo "2. Deploy on Railway (100% FREE - No Credit Card):"
echo "   â€¢ Go to https://railway.app"
echo "   â€¢ Login with GitHub"
echo "   â€¢ Click 'Deploy from GitHub repo'"
echo "   â€¢ Select your TaskManagerAPI repository"
echo "   â€¢ Add PostgreSQL service"
echo "   â€¢ Set environment variables from .env.production"
echo ""
echo "3. Your API will be live at: https://your-app-name.up.railway.app"
echo ""
echo "ğŸ†“ Railway Free Tier Includes:"
echo "   âœ… $5/month credit (very generous!)"
echo "   âœ… PostgreSQL database"  
echo "   âœ… Automatic HTTPS"
echo "   âœ… Custom domains"
echo "   âœ… No credit card required"
echo ""
echo "ğŸ“š Full deployment guide: RAILWAY_DEPLOYMENT.md"
echo ""
echo "ğŸ‰ Your Task Manager API is ready for the world!"
